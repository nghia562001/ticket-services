<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="event_report_template_badge_card" inherit_id="event.event_report_template_badge_card">
        <!-- Ghi đè nội dung -->
        <xpath expr="//div[@class='o_event_badge_ticket_wrapper']" position="replace">
            <!-- Nội dung mới -->
            <div style="margin: 0; padding: 0; font-family: Calibri, sans-serif; color: #000;">
                <div style="width: 2.52in; height: 6.02in; margin: 0; box-sizing: border-box; position: relative; overflow: hidden;">

                    <!-- Header Section -->
                    <div style="text-align: center; border-bottom: 1px dashed #000; padding-bottom: 10px; margin-bottom: 10px;">
                        <h2 style="margin: 5px 0; font-size: 16px;">Nhà xe Đăng Phượng</h2>
                        <span style="font-size: 12px;">Hotline: 0944 768 769</span>
                    </div>

                    <!-- Title -->
                    <h2 style="font-weight: bold; font-size: 16px; text-align: center; padding-bottom: 4px; padding-top: 4px;">VÉ XE KHÁCH</h2>

                    <!-- Ticket Information -->
                    <div style="font-size: 14px; border-bottom: 1px dashed #000; padding-bottom: 10px;">
                        <div style="overflow: hidden;">
                            <span style="font-weight: bold; width: 40%; float: left;">Tuyến xe:</span>
                            <span style="float: left;">Bến Xe A → Bến Xe B</span>
                        </div>
                        <div style="overflow: hidden;">
                            <span style="font-weight: bold; width: 40%; float: left;">Khởi hành:</span>
                            <span style="float: left;"
                            t-field="event.date_begin"/>
                        </div>
                        <div style="overflow: hidden;">
                            <span style="font-weight: bold; width: 40%; float: left;">Họ tên:</span>
                            <span style="float: left;"
                            t-field="attendee.name"/>
                        </div>
                        <div style="overflow: hidden;">
                            <span style="font-weight: bold; width: 40%; float: left;">Điện thoại:</span>
                            <span style="float: left;"
                            t-field="attendee.phone"/>
                        </div>
                        <div style="overflow: hidden;">
                            <span style="font-weight: bold; width: 40%; float: left;">Số ghế:</span>
                            <span style="float: left;">12A</span>
                        </div>
                        <div style="overflow: hidden;">
                            <span style="font-weight: bold; width: 40%; float: left;">Giá vé:</span>
                            <span style="float: left;">170,000 VND</span>
                        </div>
                        <div style="overflow: hidden;">
                            <span style="font-weight: bold; width: 40%; float: left;">Điểm lên xe:</span>
                            <span style="float: left;">Bến Xe A, Cổng 3</span>
                        </div>
                    </div>

                    <!-- Info Bill Section -->
                    
                    <div style="font-size: 14px; border-bottom: 1px dashed #000; margin: 10px 0; padding-bottom: 10px;">
                        <div style="overflow: hidden;">
                            <span style="font-weight: bold; width: 40%; float: left;">Hóa đơn:</span>
                            <t t-set="formatted_date" t-value="event.date_begin.strftime('%Y-%m-%d %H:%M:%S') if event.date_begin else 'Unknown Date'"/>
                            <t t-set="combined_value" t-value="formatted_date + ' - ' + str(attendee.id)"/>
                            <span style="float: left;" t-esc="combined_value"/>

                        </div>
                        <div style="overflow: hidden;">
                            <span style="font-weight: bold; width: 40%; float: left;">Ngày in:</span>
                            <span style="float: left;">24/11/2024</span>
                        </div>
                        <div style="overflow: hidden;">
                            <span style="font-weight: bold; width: 40%; float: left;">Nhân viên:</span>
                            <span style="float: left;">Nguyễn Văn B</span>
                        </div>
                    </div>

                    <!-- QR Code Section -->
                    <div style="text-align: center;">
                        <img t-attf-src="/report/barcode/QR/{{attendee.barcode if attendee and attendee.barcode else '12345678901234567890'}}?&amp;width=152&amp;height=152&amp;quiet=0" 
                             alt="QR Code" 
                             style="max-width: 50%; height: auto;" />
                    </div>

                    <!-- Footer Section -->
                    <div style="position: absolute; bottom: 10px; text-align: center; border-top: 1px dashed #000; padding-top: 10px; font-size: 12px;">
                        <span style="display: block;">Vui lòng có mặt trước giờ khởi hành 30 phút.</span>
                        <span style="display: block;">Cảm ơn quý khách đã sử dụng dịch vụ của chúng tôi!</span>
                    </div>
                </div>
            </div>
        </xpath>
    </template>


    <template id="event_report_template_full_page_ticket" inherit_id="event.event_report_template_full_page_ticket">
        <xpath expr="//div[@class='row page']" position="replace">
        <h1>Attendee list</h1>
        <div class="row" style="font-size: 14px;">
            <div class="col-7">
                <div t-out="event.name"/>
            </div>
            <div class="col-5">
                <span t-out="event.date_begin_located"/>
                <i class="fa fa-arrow-right"/>
                <span t-out="event.date_end_located"/>
            </div>
        </div>
        <table class="table mt-3" style="page-break-after:always;">
            <thead>
                <tr class="text-start">
                    <th>Name</th>
                    <th>Company</th>
                    <th>Ticket type</th>
                    <th>Phone number</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr t-foreach="attendees" t-as="attendee">
                    <td><t t-out="attendee.name"/></td>
                    <td><t t-out="attendee.company_name"/></td>
                    <td><t t-out="attendee.event_ticket_id.name"/></td>
                    <td><t t-out="attendee.phone"/></td>
                    <td class="text-center">
                        <t t-if="attendee.barcode">
                            <img t-attf-src="/report/barcode/QR/{{ attendee.barcode }}?&amp;width=87&amp;height=87&amp;quiet=0" alt="QR Code"/>
                        </t>
                    </td>
                </tr>
            </tbody>
        </table>
        </xpath>
    </template>
</odoo>
